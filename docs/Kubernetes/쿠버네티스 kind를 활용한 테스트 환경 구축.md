#k8s #kubernetes #ssh터널링

SSH 터널링을 사용하여 로컬 머신에서 리눅스 서버에 구축한 kind 클러스터의 34914 포트에 접근하는 방법은 다음과 같습니다:

1. **SSH 터널 설정**: 로컬 머신의 커맨드 라인에서 아래 명령어를 사용하여 SSH 터널을 설정합니다. 이 명령은 로컬 머신의 34914 포트를 리눅스 서버의 34914 포트로 포워딩합니다.

   ```sh
   ssh -L 34914:localhost:34914 사용자명@서버주소
   ```
   여기서 `사용자명`은 리눅스 서버의 사용자 계정이며, `서버주소`는 리눅스 서버의 IP 주소나 호스트명입니다.

2. **Kubeconfig 수정**: kind가 생성한 kubeconfig 파일에서 클러스터 API 서버의 주소를 수정할 필요가 없습니다. 왜냐하면 SSH 터널이 로컬 포트를 서버의 포트로 매핑하기 때문에, 로컬에서 `localhost:34914`로 접근하면 서버의 kind 클러스터 API 서버로 연결됩니다.

3. **OpenLens에 클러스터 추가**: 로컬 머신에서 OpenLens를 열고 `File` > `Add Cluster`를 선택한 다음, 수정하지 않은 원래의 kubeconfig 파일을 사용하여 클러스터를 추가합니다. 이 때, API 서버 주소는 `localhost:34914`로 설정되어 있어야 합니다.

4. **연결 확인**: OpenLens에서 새로 추가한 클러스터를 선택하여 연결이 성공적으로 이루어지는지 확인합니다.

이 방법을 사용하면 복잡한 네트워크 설정이나 인증서 수정 없이 안전하게 리눅스 서버의 kind 클러스터에 접근할 수 있습니다. SSH 터널이 활성화된 상태에서만 OpenLens에서 클러스터에 접근이 가능하므로, 작업을 시작할 때마다 SSH 터널을 설정해야 합니다.