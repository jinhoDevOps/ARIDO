문서 2: 쿠버네티스 학습 과정
1. 쿠버네티스의 핵심 개념 
	- 포드(Pod), 노드(Node), 네임스페이스(Namespace) 등
	- 쿠버네티스의 네트워킹 및 스토리지 관리
2. 쿠버네티스 관리 및 운영
	- 쿠버네티스 클러스터 관리
	- 애플리케이션 배포 및 스케일링
	- 모니터링 및 로깅

---

# 1 쿠버네티스 동작원리

# 2 쿠버네티스 컴포넌트
![[Pasted image 20231226115053.png]]
마스터 컴포넌트:

- etcd - key-value 데이터의 저장소
- kube-apiserver - k8s API를 사용하는 모든 요청을 받고 요청에 유효한지 검사
- kube-scheduler - 파드를 실행할 노드 선택
- kube-controller-manager  - 파드를 관찰하며 개수를 보장

워커 노드 컴포넌트:

- kubelet - 모든 노드에서 실행되는 k8s 에이전트, 데몬 형태로 동작
- kube-proxy - k8s의 network 통신을 관리, iptables rule을 구성
- 컨테이너 런타임 - 컨테이너를 실행하는 엔진  , docker, containerd, runc

---
# 3 쿠버네티스 네임스페이스

- 네임스페이스

## 4 yaml 템플릿, api
사람 친화적인 데이터 직렬화 양식
탑다운 아니고 통으로 읽어서 쿠버api문법 맞는지 확인

api 버전은 kubectl explan 명령 쓰면 확인가능



# 5. 파드

# 6 레플리케이션 컨트롤러

2024-01-18
일단 듣는중


---
참고 문서
[따배쿠 시리즈](https://www.youtube.com/playlist?list=PLApuRlvrZKohaBHvXAOhUD-RxD0uQ3z0c)


6-2 레플리카 셋 

6-3 Deployment for RollingUpdate
2024-01-19
![[Pasted image 20240119111145.png]]

디플로이먼트가 상위항목임
deployment --> ReplicaSet --> Pod
- 레플리카셋이랑 디플로이먼트랑 거의 똑같음

---
2024-01-23
디플로이먼트 적용해보려고 kind 문서 보고 진행


```sh
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml
```


2024-01-29
6-4. DaemonSet
데몬셋 - 롤링업데이트
- 전체 노드에서 파드가 한개씩 실행되도록 보장
- 로그 수집기, 모니터링 에이전트 같은 프로그램 실행시 적용
- 롤링업데이트 기능도 있음
- yaml 에 컨테이너 종류만 적어주면 노드당 파드하나 보장
	로그/모니터링 에이전트에 적합한 컨트롤러다


6-5. Stateful sets
스테이트풀셋
- 파드 이름
- 파드의 볼륨(스토리지)
이걸 유지시켜준다.
후에 serviceName 하고 파드 이름하고 연결해서 core dns 도메인 이름으로 사용가능
- 스케일 업/다운? 확인하면서 쓸수있고, 항상 이름 보장받음

6-6. job controller
24/7 runnig중인 파드 보장
`kubectl run testpod --image=centos:7 --command sleep 5`
이런식으로 실행하면 5초뒤에 파드종료 -> 그럼 또 다시 쿠버가 살림 -> 계속 증가됨
![[Pasted image 20240129120337.png]]
![[Pasted image 20240129121042.png]]
심지어는 에러가 나도 마찬가지
